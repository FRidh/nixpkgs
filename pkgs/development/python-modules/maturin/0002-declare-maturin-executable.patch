From a03cfb00ce00ab2f9352c69d55baf2a9c5b44399 Mon Sep 17 00:00:00 2001
From: Frederik Rietdijk <fridh@fridh.nl>
Date: Mon, 26 Oct 2020 15:28:57 +0100
Subject: [PATCH 2/3] declare maturin executable

---
 maturin/__init__.py | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

diff --git a/maturin/__init__.py b/maturin/__init__.py
index b16b55b..d3c40a3 100644
--- a/maturin/__init__.py
+++ b/maturin/__init__.py
@@ -18,6 +18,10 @@ from typing import List, Dict
 
 import toml
 
+
+MATURIN_EXECUTABLE = "@maturin@"
+
+
 # these are only used when creating the sdist, not when building it
 create_only_options = [
     "sdist-include",
@@ -55,7 +59,7 @@ def get_config_options() -> List[str]:
 # noinspection PyUnusedLocal
 def build_wheel(wheel_directory, config_settings=None, metadata_directory=None):
     # The PEP 517 build environment guarantees that `python` is the correct python
-    command = ["maturin", "pep517", "build-wheel", "-i", "python"]
+    command = [MATURIN_EXECUTABLE, "pep517", "build-wheel", "-i", "python"]
     command.extend(get_config_options())
 
     print("Running `{}`".format(" ".join(command)))
@@ -74,7 +78,7 @@ def build_wheel(wheel_directory, config_settings=None, metadata_directory=None):
 
 # noinspection PyUnusedLocal
 def build_sdist(sdist_directory, config_settings=None):
-    command = ["maturin", "pep517", "write-sdist", "--sdist-directory", sdist_directory]
+    command = [MATURIN_EXECUTABLE, "pep517", "write-sdist", "--sdist-directory", sdist_directory]
 
     print("Running `{}`".format(" ".join(command)))
     try:
@@ -123,7 +127,7 @@ def prepare_metadata_for_build_wheel(metadata_directory, config_settings=None):
         sys.exit(1)
 
     command = [
-        "maturin",
+        MATURIN_EXECUTABLE,
         "pep517",
         "write-dist-info",
         "--metadata-directory",
-- 
2.28.0

